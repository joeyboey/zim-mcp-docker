# ============================================================================
# ZIM MCP Server - Environment Configuration
# ============================================================================
#
# Copy this file to .env and customize the values for your deployment
#
# For Docker Compose, these values can be overridden in compose.yaml
# For local development, ensure these match your setup
#
# ============================================================================

# ----------------------------------------------------------------------------
# Transport Configuration
# ----------------------------------------------------------------------------

# Transport type: stdio (local), http (streamable), or sse (legacy)
FASTMCP_TRANSPORT=http

# Network binding - use 0.0.0.0 for Docker, 127.0.0.1 for local only
FASTMCP_HOST=0.0.0.0

# Port for HTTP or SSE transport
# Recommended: 8000 for HTTP, 8001 for SSE
FASTMCP_PORT=8000

# ----------------------------------------------------------------------------
# ZIM Files Configuration
# ----------------------------------------------------------------------------

# Directory containing ZIM files
# Docker: /zim_files (mounted from host)
# Local:  ./zim_files or absolute path
ZIM_FILES_DIRECTORY=/app/zim_files

# ----------------------------------------------------------------------------
# Search Configuration
# ----------------------------------------------------------------------------

# Maximum number of search results to return per query
MAX_SEARCH_RESULTS=100

# Search timeout in seconds
SEARCH_TIMEOUT=30

# ----------------------------------------------------------------------------
# Content Configuration
# ----------------------------------------------------------------------------

# Maximum content length per entry (bytes)
# Prevents token overflow for large articles
MAX_CONTENT_LENGTH=50000

# Default content format (text or html)
DEFAULT_CONTENT_FORMAT=text

# ----------------------------------------------------------------------------
# Cache Configuration
# ----------------------------------------------------------------------------

# Number of ZIM archives to keep open (LRU cache)
# Higher = better performance, more memory
ARCHIVE_CACHE_SIZE=10

# Number of search results to cache
SEARCH_CACHE_SIZE=1000

# Content cache size in bytes (50MB default)
CONTENT_CACHE_SIZE=52428800

# ----------------------------------------------------------------------------
# Performance Configuration
# ----------------------------------------------------------------------------

# Maximum concurrent search operations
MAX_CONCURRENT_SEARCHES=5

# Enable parallel search across multiple ZIM files
ENABLE_PARALLEL_SEARCH=true

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------

# Application log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# FastMCP framework log level
FASTMCP_LOG_LEVEL=INFO

# Enable detailed performance logging
ENABLE_PERFORMANCE_LOGGING=false

# Mask sensitive error details in responses (security)
FASTMCP_MASK_ERROR_DETAILS=false

# ----------------------------------------------------------------------------
# Docker-Specific Settings
# ----------------------------------------------------------------------------

# Python buffering (always unbuffered in Docker)
PYTHONUNBUFFERED=1

# Prevent Python from writing .pyc files
PYTHONDONTWRITEBYTECODE=1

# ----------------------------------------------------------------------------
# Advanced FastMCP Settings (Optional)
# ----------------------------------------------------------------------------

# Include FastMCP metadata in responses
# FASTMCP_INCLUDE_FASTMCP_META=true

# Strict input validation mode
# FASTMCP_STRICT_INPUT_VALIDATION=false

# Resource prefix format: path or protocol
# FASTMCP_RESOURCE_PREFIX_FORMAT=path

# ============================================================================
# Example Configurations
# ============================================================================
#
# Local Development (STDIO):
#   FASTMCP_TRANSPORT=stdio
#   ZIM_FILES_DIRECTORY=./zim_files
#   LOG_LEVEL=DEBUG
#
# Docker HTTP (Production):
#   FASTMCP_TRANSPORT=http
#   FASTMCP_HOST=0.0.0.0
#   FASTMCP_PORT=8000
#   ZIM_FILES_DIRECTORY=/app/zim_files
#
# Docker SSE (legacy):
#   FASTMCP_TRANSPORT=sse
#   FASTMCP_HOST=0.0.0.0
#   FASTMCP_PORT=8001
#   ZIM_FILES_DIRECTORY=/app/zim_files
#
# ============================================================================
